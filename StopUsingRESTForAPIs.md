# 停止使用REST方式的API
## GraphQL是更好的方式

[原文链接🔗](https://medium.com/javascript-in-plain-english/stop-using-rest-for-apis-d697727ae6dd)


REST被许多开发人员用来通过HTTP发送数据，而GraphQL这一种技术通常可以来代替REST
API。在本文中，我将解释这两者的优点，局限性以及区别，这将帮助您为您的下一个项目做出选择

# 什么是REST？

**REST（代表性状态传输）**是一个API设计架构，它通过使用一组预定义**无状态**的操作来实现Web服务（包括`GET`，`POST`，`PUT`，和`DELETE`）。

REST的核心思想是，可以通过对资源URL进行请求来获取资源并得到响应（通常为JSON，但取决于API）。

## REST的优点

- REST是**可伸缩的**，因为它将**客户端**和**服务器**分离，因此您可以轻松地扩展应用程序。
- **灵活性**是使用REST的另一个优势，因为它可以被设计成处理不同类型的调用并返回不同的数据格式。

## REST的局限性

- **过度获取**-API端点(服务器)提供了比应用程序所需更多的信息
- **提取不足**-API端点未能提供应用程序所有必需信息。因此，客户端必须发出多个请求才能获得应用程序所需的信息。

# 什么是GraphQL？

**GraphQL**是一种API设计架构，相对于REST，它采用了不同的方式，其中所有事物都被逻辑上看做已连接的图形。这也意味着您可以以这样的方式定制请求：可以从端点请求任何内容，您将得到所请求的内容，仅此而已（图的连通性）。我们传递查询并获得响应。除此之外，它还允许您将不同的实体组合到单个查询中。

## GraphQL的好处

- **检索精确的数据**，没有冗余信息产生。在GraphQL中，您将获得任何您所需的东西，这是一个很大的优点。
- 客户端中**更快的开发**。通常，当数据需求发生变化时，您只需要修改查询，并且不需要太多更改，从而可以快速进行产品迭代。客户端和服务器团队都可以独立工作，只要两个团队都知道数据的结构即可。

## GraphQL的局限性

- 对于简单的应用程序而言，设置类型，查询等可能会有些**复杂**，因为可以使用REST轻松完成。
- 它使用**单个端点，**而不是遵循HTTP规范进行缓存。在网络这个层次进行缓存很重要，因为它可以减少客户端到服务器的通信量。

# 比较两者的简单示例

举例来说，假设我们需要在页面显示用户提供的稿件，其中包含该用户的**帖子**及其**关注者的列表**。在我们的案例中，我们必须显示该帖子的作者，该帖子以及该用户的关注者。

如果要使用REST，我们将至少发出2或3个请求，用于以下内容：

- `/user/<id>` 获取用户（作者）详细信息，可能是作者的名字。
- `/user/<id>/posts` 获取该用户发布的帖子列表。
- `/user/<id>/followers` 获取用户的关注者列表。

但是在这些情况下，我们都过度地获取了数据。例如，在第一个请求中，我们只需要名称，但是使用此方法时，我们将获得有关用户的所有详细信息。



当GraphQL显示其功能的时候。我们需要指定查询，然后可以获得所需的输出。为了使用GraphQL达到相同的目的，我们可以使用类似于以下的查询：

```
查询{
  用户（id：'123'）{
    名称
    帖子{
      标题
    }
    关注者{
      名称
    } 
  } 
}
```

通过使用这样的查询，我们将能够获得具有以上属性的JSON响应。简洁明了，不是吗？

# GraphQL与REST

总结一下，GraphQL与REST之间存在的明显区别：

## 1.数据获取

REST方式导致**过度获取**或**不足获取**，而GraphQL并非如此。在GraphQL中，*您所要求的就是所得到的。*

## 2.对象定义（JSON响应）

在REST中，您可以在后端定义对象，而在GraphQL中，您可以在前端定义对象。

## 3.自动缓存

REST自动使缓存生效，而GraphQL没有自动缓存系统，但是使用诸如Apollo Client，Relay等的客户端将使缓存成为可能。

## 4.错误处理

与GraphQL相比，REST中的错误处理的确要简单得多，REST通常会提供*200 OK的*状态码，即使出现错误也是提供状态码。但是，当使用诸如Apollo Client，Relay等的客户端时，GraphQL也可以很容易处理错误。

# 结论

GraphQL的确比REST具有许多优势，但它可能并不总是*最佳的*实现。就像我之前说的，选择取决于您的应用程序，是选择**REST**还是**GraphQL**。

我希望这篇文章可以帮助您在将来的项目中做出决定。如果您想分享有关GraphQL或REST的经验，请将其放在评论部分。感谢您的阅读！